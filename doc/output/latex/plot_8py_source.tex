\hypertarget{plot_8py_source}{}\doxysection{plot.\+py}
\label{plot_8py_source}\index{C:/Users/franc/Desktop/Ubuntu/bebop\_controller/src/bebop\_controller/scripts/plot.py@{C:/Users/franc/Desktop/Ubuntu/bebop\_controller/src/bebop\_controller/scripts/plot.py}}
\mbox{\hyperlink{plot_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00001}00001 \textcolor{comment}{\#!/usr/bin/env python}}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00002}00002 \textcolor{keyword}{import} rospy}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00003}00003 \textcolor{keyword}{from} std\_msgs.msg \textcolor{keyword}{import} Empty}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00004}00004 \textcolor{keyword}{import} os}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00005}00005 \textcolor{keyword}{import} csv}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00006}00006 \textcolor{keyword}{import} time}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00007}00007 \textcolor{keyword}{import} pandas \textcolor{keyword}{as} pd}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00008}00008 \textcolor{keyword}{import} matplotlib}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00009}00009 matplotlib.use(\textcolor{stringliteral}{'Agg'})}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00010}00010 \textcolor{comment}{\#import matplotlib.pyplot as plt}}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00011}00011 \textcolor{comment}{\#import sys}}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00012}00012 }
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00013}00013 }
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00021}00021 }
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00022}\mbox{\hyperlink{classplot_1_1_plots}{00022}} \textcolor{keyword}{class }\mbox{\hyperlink{classplot_1_1_plots}{Plots}}:}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00023}\mbox{\hyperlink{classplot_1_1_plots_af4d6d6e21930b3648a182d81a2028bbd}{00023}}     \textcolor{keyword}{def }\mbox{\hyperlink{classplot_1_1_plots_af4d6d6e21930b3648a182d81a2028bbd}{\_\_init\_\_}}(self, path, topic, yaml):}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00024}\mbox{\hyperlink{classplot_1_1_plots_a2a63abfb743479f8899c5bd79b829c64}{00024}}         self.\mbox{\hyperlink{classplot_1_1_plots_a2a63abfb743479f8899c5bd79b829c64}{path}} = path}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00025}\mbox{\hyperlink{classplot_1_1_plots_a5f3db6c28c01e6afc897786b31d09565}{00025}}         self.\mbox{\hyperlink{classplot_1_1_plots_a5f3db6c28c01e6afc897786b31d09565}{yaml}} = yaml}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00026}00026         rospy.Subscriber(topic, Empty, self.\mbox{\hyperlink{classplot_1_1_plots_a827be905cd10139d41f6da845eda648d}{Plot}})}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00027}00027         rospy.spin() }
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00029}00029     }
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00030}\mbox{\hyperlink{classplot_1_1_plots_a827be905cd10139d41f6da845eda648d}{00030}}     \textcolor{keyword}{def }\mbox{\hyperlink{classplot_1_1_plots_a827be905cd10139d41f6da845eda648d}{Plot}}(self, data):}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00031}00031         data = pd.read\_csv(os.path.join(self.\mbox{\hyperlink{classplot_1_1_plots_a2a63abfb743479f8899c5bd79b829c64}{path}},\textcolor{stringliteral}{'data.csv'}))}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00032}00032         print(os.path.join(self.\mbox{\hyperlink{classplot_1_1_plots_a2a63abfb743479f8899c5bd79b829c64}{path}},\textcolor{stringliteral}{'data.csv'}))}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00033}00033         col=\{\textcolor{stringliteral}{'x\_ref'}: \textcolor{stringliteral}{r'\$x\_r\$'}, \textcolor{stringliteral}{'y\_ref'}: \textcolor{stringliteral}{r'\$y\_r\$'}, \textcolor{stringliteral}{'z\_ref'}: \textcolor{stringliteral}{r'\$z\_r\$'}, \textcolor{stringliteral}{'yaw\_ref'}: \textcolor{stringliteral}{r'\$\(\backslash\)psi\_r\$'},}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00034}00034                 \textcolor{stringliteral}{'x'}: \textcolor{stringliteral}{r'\$x\_d\$'}, \textcolor{stringliteral}{'y'}: \textcolor{stringliteral}{r'\$y\_d\$'}, \textcolor{stringliteral}{'z'}: \textcolor{stringliteral}{r'\$z\_d\$'}, \textcolor{stringliteral}{'yaw'}: \textcolor{stringliteral}{r'\$\(\backslash\)psi\_d\$'},}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00035}00035                 \textcolor{stringliteral}{'v\_x'}: \textcolor{stringliteral}{r'\$v\_x\$'}, \textcolor{stringliteral}{'v\_y'}: \textcolor{stringliteral}{r'\$v\_y\$'}, \textcolor{stringliteral}{'v\_z'}: \textcolor{stringliteral}{r'\$v\_z\$'}, \textcolor{stringliteral}{'v\_yaw'}: \textcolor{stringliteral}{r'\$v\_\(\backslash\)psi\$'}\}}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00036}00036         data.rename(columns=col, inplace = \textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00037}00037         drone\_df = data.loc[:, [\textcolor{stringliteral}{'Time'},\textcolor{stringliteral}{r'\$x\_d\$'},\textcolor{stringliteral}{r'\$y\_d\$'},\textcolor{stringliteral}{r'\$z\_d\$'},\textcolor{stringliteral}{r'\$\(\backslash\)psi\_d\$'}]]}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00038}00038         reference\_df = data.loc[:, [\textcolor{stringliteral}{'Time'},\textcolor{stringliteral}{r'\$x\_r\$'},\textcolor{stringliteral}{r'\$y\_r\$'},\textcolor{stringliteral}{r'\$z\_r\$'},\textcolor{stringliteral}{r'\$\(\backslash\)psi\_r\$'}]]}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00039}00039         cmd\_vel\_df = data.loc[:, [\textcolor{stringliteral}{'Time'},\textcolor{stringliteral}{r'\$v\_x\$'},\textcolor{stringliteral}{r'\$v\_y\$'},\textcolor{stringliteral}{r'\$v\_z\$'},\textcolor{stringliteral}{r'\$v\_\(\backslash\)psi\$'}]]}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00041}00041         minV = drone\_df[\textcolor{stringliteral}{'Time'}].min()}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00042}00042         maxV = drone\_df[\textcolor{stringliteral}{'Time'}].\mbox{\hyperlink{namespacebebop__controller_a23441b7672b09d003134d29016c2d08c}{max}}()}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00044}00044         ax = drone\_df.plot(x=0,grid=\textcolor{keyword}{True},title=\textcolor{stringliteral}{'Drone'})}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00045}00045         ax.set\_xlim(minV,maxV)}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00046}00046         ax.get\_figure().savefig(os.path.join(self.\mbox{\hyperlink{classplot_1_1_plots_a2a63abfb743479f8899c5bd79b829c64}{path}},\textcolor{stringliteral}{'drone.png'}))}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00047}00047         ax = reference\_df.plot(x=0,grid=\textcolor{keyword}{True},title=\textcolor{stringliteral}{'Reference'})}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00048}00048         ax.set\_xlim(minV,maxV)}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00049}00049         ax.get\_figure().savefig(os.path.join(self.\mbox{\hyperlink{classplot_1_1_plots_a2a63abfb743479f8899c5bd79b829c64}{path}},\textcolor{stringliteral}{'reference.png'}))}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00050}00050         ax = cmd\_vel\_df.plot(x=0,grid=\textcolor{keyword}{True},title=\textcolor{stringliteral}{'CMD\_Vel'})}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00051}00051         ax.set\_xlim(minV,maxV)}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00052}00052         ax.get\_figure().savefig(os.path.join(self.\mbox{\hyperlink{classplot_1_1_plots_a2a63abfb743479f8899c5bd79b829c64}{path}},\textcolor{stringliteral}{'cmd\_vel.png'}))}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00053}00053         }
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00054}00054         \textcolor{keywordflow}{for} ax \textcolor{keywordflow}{in} [\textcolor{stringliteral}{r'x'},\textcolor{stringliteral}{r'y'},\textcolor{stringliteral}{r'z'},\textcolor{stringliteral}{r'\(\backslash\)psi'}]:}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00055}00055             ax\_orig = \textcolor{stringliteral}{r'\$'} + ax + \textcolor{stringliteral}{r'\$'}}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00056}00056             ax\_drone = \textcolor{stringliteral}{r'\$'} + ax + \textcolor{stringliteral}{r'\_d\$'}}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00057}00057             ax\_ref = \textcolor{stringliteral}{r'\$'} + ax + \textcolor{stringliteral}{r'\_r\$'}}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00058}00058             df = data.loc[:,[\textcolor{stringliteral}{'Time'},ax\_drone, ax\_ref]]}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00059}00059             name = ax + \textcolor{stringliteral}{'.png'}}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00060}00060             fn = os.path.join(self.\mbox{\hyperlink{classplot_1_1_plots_a2a63abfb743479f8899c5bd79b829c64}{path}},name)}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00061}00061             ax = df.plot(x=0,grid=\textcolor{keyword}{True},title=ax\_orig)}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00062}00062             ax.set\_xlim(minV,maxV)}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00063}00063             ax.get\_figure().savefig(fn)}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00064}00064 }
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00065}00065         os.system(\textcolor{stringliteral}{"{}cp \$(rospack find bebop\_controller)/resource/\{\} \{\}"{}}.format(self.\mbox{\hyperlink{classplot_1_1_plots_a5f3db6c28c01e6afc897786b31d09565}{yaml}}, self.\mbox{\hyperlink{classplot_1_1_plots_a2a63abfb743479f8899c5bd79b829c64}{path}}))}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00066}00066         os.system(\textcolor{stringliteral}{"{}cp \$(rospack find bebop\_controller)/resource/max\_speed.yaml \{\}"{}}.format(self.\mbox{\hyperlink{classplot_1_1_plots_a2a63abfb743479f8899c5bd79b829c64}{path}}))}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00067}00067         os.system(\textcolor{stringliteral}{"{}cp \$(rospack find bebop\_controller)/resource/safe\_zone.yaml \{\}"{}}.format(self.\mbox{\hyperlink{classplot_1_1_plots_a2a63abfb743479f8899c5bd79b829c64}{path}}))}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00068}00068 }
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00069}00069         rospy.signal\_shutdown(\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00071}00071 \textcolor{keywordflow}{if} \_\_name\_\_ == \textcolor{stringliteral}{'\_\_main\_\_'}:}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00072}00072     rospy.init\_node(\textcolor{stringliteral}{'plot'})}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00073}\mbox{\hyperlink{namespaceplot_a7701c47863e843fd12a1ea439f0c4d6b}{00073}}     path = rospy.get\_param(\textcolor{stringliteral}{'\string~Dir'})}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00074}\mbox{\hyperlink{namespaceplot_a6392d0c461fc1991f5da89853f31395d}{00074}}     sub = rospy.get\_param(\textcolor{stringliteral}{'/Subfolder'})}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00075}\mbox{\hyperlink{namespaceplot_a42cfb0cd19412f5d1e115226c4e0f488}{00075}}     topic = rospy.get\_param(\textcolor{stringliteral}{'\string~Topics/CSV\_End'})}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00076}\mbox{\hyperlink{namespaceplot_a7224f1536ee08e6e440e06290b0d59a3}{00076}}     yaml = rospy.get\_param(\textcolor{stringliteral}{'\string~YAML'})}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00077}00077     sub = sub[:-\/1]}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00078}\mbox{\hyperlink{namespaceplot_a3e20593cffcc130767fe700f0417b27c}{00078}}     plt = \mbox{\hyperlink{classplot_1_1_plots}{Plots}}(os.path.join(path,sub),topic,yaml)}
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00079}00079     }
\DoxyCodeLine{\Hypertarget{plot_8py_source_l00080}00080     }

\end{DoxyCode}
