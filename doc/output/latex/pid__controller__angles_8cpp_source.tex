\hypertarget{pid__controller__angles_8cpp_source}{}\doxysection{pid\+\_\+controller\+\_\+angles.\+cpp}
\label{pid__controller__angles_8cpp_source}\index{C:/Users/franc/Desktop/Ubuntu/bebop\_controller/src/bebop\_controller/src/nodes/pid\_controller\_angles.cpp@{C:/Users/franc/Desktop/Ubuntu/bebop\_controller/src/bebop\_controller/src/nodes/pid\_controller\_angles.cpp}}
\mbox{\hyperlink{pid__controller__angles_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00004}00004 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{pid__controller__angles_8h}{pid\_controller\_angles.h}}"{}}}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00006}00006 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacebebop__controller}{bebop\_controller}} \{}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00007}00007 }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00008}\mbox{\hyperlink{classbebop__controller_1_1_p_i_d_controller_a0119d624964d0ed521afc78a128cc225}{00008}}     \mbox{\hyperlink{classbebop__controller_1_1_p_i_d_controller_a0119d624964d0ed521afc78a128cc225}{PIDController::PIDController}}() \{}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00009}00009         ros::NodeHandle pnh(\textcolor{stringliteral}{"{}\string~"{}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00010}00010         int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}} = int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}} = int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}} = int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}} = u\_z = 0;}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00011}00011         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Gains/Px"{}}, \mbox{\hyperlink{pid__controller__angles_8h_a3dd348ce991235ccb39c5a19b3d93589}{PxDefaultValue}}, \&P.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00012}00012         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Gains/Py"{}}, \mbox{\hyperlink{pid__controller__angles_8h_a8654e0a8831ffeaa4317e1be94b47fc8}{PyDefaultValue}}, \&P.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00013}00013         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Gains/Pz"{}}, \mbox{\hyperlink{pid__controller__angles_8h_accc76b47bca72fb2722615edd004276a}{PzDefaultValue}}, \&P.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00014}00014         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Gains/Pyaw"{}}, \mbox{\hyperlink{pid__controller__angles_8h_a5501588d717ab46e7a7dd644409ff2bb}{PyawDefaultValue}}, \&P.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00015}00015         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Gains/Dx"{}}, \mbox{\hyperlink{pid__controller__angles_8h_ad026d32ce8b90b65190195d63032285c}{DxDefaultValue}}, \&D.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00016}00016         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Gains/Dy"{}}, \mbox{\hyperlink{pid__controller__angles_8h_ac93dfb6c80a6c7753d5f52ce7ae5acae}{DyDefaultValue}}, \&D.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00017}00017         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Gains/Dz"{}}, \mbox{\hyperlink{pid__controller__angles_8h_a68640c528a6cefeda5358c20d71b6f9d}{DzDefaultValue}}, \&D.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00018}00018         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Gains/Dyaw"{}}, \mbox{\hyperlink{pid__controller__angles_8h_aef52e09a0de472dabbf45f59e0f55e83}{DyawDefaultValue}}, \&D.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00019}00019         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Gains/Ix"{}}, \mbox{\hyperlink{pid__controller__angles_8h_a875448011a4abbe1c196a47e976486e2}{IxDefaultValue}}, \&I.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00020}00020         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Gains/Iy"{}}, \mbox{\hyperlink{pid__controller__angles_8h_ac8394d59b08eb81d0e6f6e08ca31e48c}{IyDefaultValue}}, \&I.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00021}00021         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Gains/Iz"{}}, \mbox{\hyperlink{pid__controller__angles_8h_a994738f949c04279ce55c62d30afff9a}{IzDefaultValue}}, \&I.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00022}00022         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Gains/Iyaw"{}}, \mbox{\hyperlink{pid__controller__angles_8h_a994738f949c04279ce55c62d30afff9a}{IzDefaultValue}}, \&I.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00023}00023         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Limits/Ix"{}}, \mbox{\hyperlink{pid__controller__angles_8h_a84e60b41ddf71bb7d643bff84041d042}{LIxDefaultValue}}, \&LI.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00024}00024         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Limits/Iy"{}}, \mbox{\hyperlink{pid__controller__angles_8h_a98b1b21ca4446a351fc1e9dd50456b78}{LIyDefaultValue}}, \&LI.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00025}00025         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Limits/Iz"{}}, \mbox{\hyperlink{pid__controller__angles_8h_ad718d2c44c7156b40ea441f2cea84b6d}{LIzDefaultValue}}, \&LI.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00026}00026         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Limits/Iyaw"{}}, \mbox{\hyperlink{pid__controller__angles_8h_a77b9eb2b7749083c83a66988e62da45e}{LIyawDefaultValue}}, \&LI.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00027}00027         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Reference\_Gains/X"{}}, \mbox{\hyperlink{citc__controller__angles_8h_ad16e0ed5c907e6ae8c7846d33a26f796}{RGxDefaultValue}}, \&RG.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00028}00028         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Reference\_Gains/Y"{}}, \mbox{\hyperlink{citc__controller__angles_8h_ae702824d792edac413f7c92647d98a58}{RGyDefaultValue}}, \&RG.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00029}00029         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Reference\_Gains/Z"{}}, \mbox{\hyperlink{citc__controller__angles_8h_a32f62ae8da691dc1d80e27ae0fe66864}{RGzDefaultValue}}, \&RG.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00030}00030         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Reference\_Gains/Yaw"{}}, \mbox{\hyperlink{citc__controller__angles_8h_aaf901f72c664b73897c98110c3248318}{RGyawDefaultValue}}, \&RG.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00031}00031         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Lambda/X"{}}, \mbox{\hyperlink{citc__controller__angles_8h_ac97a95300d1421a415b15e02cee3d806}{LambdaX}}, \&lambda.\mbox{\hyperlink{structbebop__controller_1_1_vector3_a823275810a8257e764aa470b48e824c2}{x}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00032}00032         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Lambda/Y"{}}, \mbox{\hyperlink{citc__controller__angles_8h_a7be73050543da01007716ea7f6cbc424}{LambdaY}}, \&lambda.\mbox{\hyperlink{structbebop__controller_1_1_vector3_a7202b632dc7b35e6619019b74ec021c6}{y}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00033}00033         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Lambda/Z"{}}, \mbox{\hyperlink{citc__controller__angles_8h_ae91fa8862eb07499bf3bf8930befd11e}{LambdaZ}}, \&lambda.\mbox{\hyperlink{structbebop__controller_1_1_vector3_a27a5792df863e68a43e1bb8b697e74b4}{z}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00034}00034         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, std::string(\textcolor{stringliteral}{"{}Normalize/Max\_Tilt\_Angle"{}}), }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00035}00035                         \mbox{\hyperlink{citc__controller__angles_8h_a1ad975d297c7c99faa0b240db98cdfc1}{MAX\_TILT\_ANGLE}}, \&norm.\mbox{\hyperlink{structbebop__controller_1_1_normalize_a7f79442c102ad11335e7d9dc4f05b6ce}{angle}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00036}00036         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, std::string(\textcolor{stringliteral}{"{}Normalize/Max\_Vertical\_Speed"{}}), }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00037}00037                         \mbox{\hyperlink{citc__controller__angles_8h_a6658f60cf267cb3ebb85791a92b59f7e}{MAX\_VERTICAL\_SPEED}}, \&norm.\mbox{\hyperlink{structbebop__controller_1_1_normalize_a1c8c966f6384984fc6127ffb1dc148c4}{vertical}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00038}00038         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, std::string(\textcolor{stringliteral}{"{}Normalize/Max\_Rotation\_Speed"{}}), }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00039}00039                         \mbox{\hyperlink{citc__controller__angles_8h_a90f7cac8b5a6a9933579c83f7852552e}{MAX\_ROTATION\_SPEED}}, \&norm.\mbox{\hyperlink{structbebop__controller_1_1_normalize_a81ea78bea6e2f30c01893c5d00039dc8}{rotation}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00040}00040         \mbox{\hyperlink{namespacebebop__controller_a32600fdf0c17428368f53f564a490449}{GetRosParameter}}(pnh, \textcolor{stringliteral}{"{}Mass"{}}, \mbox{\hyperlink{citc__controller__angles_8h_ad96793de0cc60529a6b01040c0cd8033}{MASS}}, \&mass);}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00041}00041     \}}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00042}00042 }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00043}00043     \textcolor{keywordtype}{void} PIDController::CalculateCommandVelocities(geometry\_msgs::Twist\& ref\_command\_signals)\{}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00044}00044         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classbebop__controller_1_1_base_controller_a4556e6065d4089dfa23ccff27d0d1143}{controller\_active\_}})\{}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00045}00045             ref\_command\_signals.linear.x = 0.0;}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00046}00046             ref\_command\_signals.linear.y = 0.0;}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00047}00047             ref\_command\_signals.linear.z = 0.0;}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00048}00048             ref\_command\_signals.angular.z = 0.0;}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00049}00049             \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00050}00050         \}}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00051}00051         Vector4 a, e, dot\_e;}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00052}00052         \mbox{\hyperlink{classbebop__controller_1_1_base_controller_aac87802accc263d816e53eee4b19c152}{GetErrors}}(e);}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00053}00053         \mbox{\hyperlink{classbebop__controller_1_1_base_controller_aad4281d8556b2b46f3bbdd2e9e27de09}{CalculateLeashLength}}(e, P);}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00054}00054         \mbox{\hyperlink{classbebop__controller_1_1_base_controller_a8188301416dd6bf5696307536a4595c2}{LimitPositionErrors}}(e);}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00055}00055         IntegrateErrors(e);}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00056}00056         LimitIntegralPart();}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00057}00057         \mbox{\hyperlink{classbebop__controller_1_1_base_controller_aeab18256a7348e206911f9d7f1679e6a}{GetVelocityErrors}}(dot\_e);}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00058}00058 }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00059}00059         a.x = \mbox{\hyperlink{namespacebebop__controller_adbb5ce519c9ccec2a03354540b0d30fe}{clamp}}(-\/P.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}}*e.x -\/ D.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}}*dot\_e.x -\/ I.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}}*int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}} + RG.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}}*\mbox{\hyperlink{classbebop__controller_1_1_base_controller_af6088eb708f8d4155e5512a0fd3a3ffc}{command\_trajectory\_}}.acceleration\_W[0],}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00060}00060                     mass*(lambda.\mbox{\hyperlink{structbebop__controller_1_1_vector3_a823275810a8257e764aa470b48e824c2}{x}}-\/std::abs(\mbox{\hyperlink{classbebop__controller_1_1_base_controller_af6088eb708f8d4155e5512a0fd3a3ffc}{command\_trajectory\_}}.acceleration\_W[0])));}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00061}00061         a.y = \mbox{\hyperlink{namespacebebop__controller_adbb5ce519c9ccec2a03354540b0d30fe}{clamp}}(-\/P.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}}*e.y -\/ D.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}}*dot\_e.y -\/ I.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}}*int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}} + RG.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}}*\mbox{\hyperlink{classbebop__controller_1_1_base_controller_af6088eb708f8d4155e5512a0fd3a3ffc}{command\_trajectory\_}}.acceleration\_W[1],}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00062}00062                     mass*(lambda.\mbox{\hyperlink{structbebop__controller_1_1_vector3_a7202b632dc7b35e6619019b74ec021c6}{y}}-\/std::abs(\mbox{\hyperlink{classbebop__controller_1_1_base_controller_af6088eb708f8d4155e5512a0fd3a3ffc}{command\_trajectory\_}}.acceleration\_W[1])));}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00063}00063         a.z = \mbox{\hyperlink{namespacebebop__controller_adbb5ce519c9ccec2a03354540b0d30fe}{clamp}}(-\/P.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}}*e.z -\/ D.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}}*dot\_e.z -\/ I.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}}*int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}} + RG.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}}*\mbox{\hyperlink{classbebop__controller_1_1_base_controller_af6088eb708f8d4155e5512a0fd3a3ffc}{command\_trajectory\_}}.acceleration\_W[2],}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00064}00064                     mass*(lambda.\mbox{\hyperlink{structbebop__controller_1_1_vector3_a27a5792df863e68a43e1bb8b697e74b4}{z}}-\/std::abs(\mbox{\hyperlink{classbebop__controller_1_1_base_controller_af6088eb708f8d4155e5512a0fd3a3ffc}{command\_trajectory\_}}.acceleration\_W[2])));}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00065}00065         a.yaw = -\/P.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}}*e.yaw -\/ D.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}}*dot\_e.yaw -\/ I.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}}*int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}};}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00066}00066 }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00067}00067         \textcolor{keywordtype}{double} u\_Terr, u\_T, phi\_r, theta\_r, psi;}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00068}00068         u\_Terr = a.z + mass*\mbox{\hyperlink{base__controller_8h_a6801baa546c6112d19eb095111d24720}{GRAVITY}};}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00069}00069         u\_T = sqrt(pow(a.x,2) + pow(a.y,2) + pow(u\_Terr,2));}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00070}00070         psi = \mbox{\hyperlink{classbebop__controller_1_1_base_controller_aca60bbaed0b611dd3630ed992eb3c7f5}{state}}.\mbox{\hyperlink{structbebop__controller_1_1_state_af32acde2ca31549c11ee184223b65da3}{orientation}}.\mbox{\hyperlink{structbebop__controller_1_1_vector3_a27a5792df863e68a43e1bb8b697e74b4}{z}};}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00071}00071         theta\_r = atan(((a.x * cos(psi)) + (a.y * sin(psi)))/u\_Terr);}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00072}00072         phi\_r = atan(cos(theta\_r)*(((a.x * sin(psi)) -\/ (a.y * cos(psi)))/(u\_Terr)));}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00073}00073 }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00074}00074         u\_z = \mbox{\hyperlink{namespacebebop__controller_adbb5ce519c9ccec2a03354540b0d30fe}{clamp}}(u\_z + \mbox{\hyperlink{classbebop__controller_1_1_base_controller_a6395a83094bd3d79d914131dbc45bf1c}{diff}}*a.z,\mbox{\hyperlink{classbebop__controller_1_1_base_controller_a870f62f9731f89bfe9fd7107615b672e}{max\_speed}}.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}}*norm.\mbox{\hyperlink{structbebop__controller_1_1_normalize_a1c8c966f6384984fc6127ffb1dc148c4}{vertical}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00075}00075 }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00076}00076         ref\_command\_signals.linear.x = \mbox{\hyperlink{namespacebebop__controller_adbb5ce519c9ccec2a03354540b0d30fe}{clamp}}(theta\_r*RAD\_2\_DEG/norm.\mbox{\hyperlink{structbebop__controller_1_1_normalize_a7f79442c102ad11335e7d9dc4f05b6ce}{angle}},\mbox{\hyperlink{classbebop__controller_1_1_base_controller_a870f62f9731f89bfe9fd7107615b672e}{max\_speed}}.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00077}00077         ref\_command\_signals.linear.y = \mbox{\hyperlink{namespacebebop__controller_adbb5ce519c9ccec2a03354540b0d30fe}{clamp}}(-\/phi\_r*RAD\_2\_DEG/norm.\mbox{\hyperlink{structbebop__controller_1_1_normalize_a7f79442c102ad11335e7d9dc4f05b6ce}{angle}},\mbox{\hyperlink{classbebop__controller_1_1_base_controller_a870f62f9731f89bfe9fd7107615b672e}{max\_speed}}.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00078}00078         ref\_command\_signals.linear.z = \mbox{\hyperlink{namespacebebop__controller_adbb5ce519c9ccec2a03354540b0d30fe}{clamp}}(u\_z/norm.\mbox{\hyperlink{structbebop__controller_1_1_normalize_a1c8c966f6384984fc6127ffb1dc148c4}{vertical}},\mbox{\hyperlink{classbebop__controller_1_1_base_controller_a870f62f9731f89bfe9fd7107615b672e}{max\_speed}}.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00079}00079         ref\_command\_signals.angular.z = \mbox{\hyperlink{namespacebebop__controller_adbb5ce519c9ccec2a03354540b0d30fe}{clamp}}(a.yaw*RAD\_2\_DEG/norm.\mbox{\hyperlink{structbebop__controller_1_1_normalize_a81ea78bea6e2f30c01893c5d00039dc8}{rotation}},\mbox{\hyperlink{classbebop__controller_1_1_base_controller_a870f62f9731f89bfe9fd7107615b672e}{max\_speed}}.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00080}00080     \}}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00081}00081 }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00082}00082     \textcolor{keywordtype}{void} PIDController::IntegrateErrors(Vector4\& e) \{}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00083}00083         int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}} += e.x*\mbox{\hyperlink{classbebop__controller_1_1_base_controller_a6395a83094bd3d79d914131dbc45bf1c}{diff}};}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00084}00084         int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}} += e.y*\mbox{\hyperlink{classbebop__controller_1_1_base_controller_a6395a83094bd3d79d914131dbc45bf1c}{diff}};}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00085}00085         int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}} += e.z*\mbox{\hyperlink{classbebop__controller_1_1_base_controller_a6395a83094bd3d79d914131dbc45bf1c}{diff}};}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00086}00086         int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}} += e.yaw*\mbox{\hyperlink{classbebop__controller_1_1_base_controller_a6395a83094bd3d79d914131dbc45bf1c}{diff}};}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00087}00087     \}}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00088}00088 }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00089}00089     \textcolor{keywordtype}{void} PIDController::LimitIntegralPart() \{}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00090}00090         \textcolor{keywordflow}{if} (LI.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}} > 0) int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}} = \mbox{\hyperlink{namespacebebop__controller_adbb5ce519c9ccec2a03354540b0d30fe}{clamp}}(int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}}, LI.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}}/I.\mbox{\hyperlink{structbebop__controller_1_1_vector4_ae685746d7246756a70902737ac1d2fa7}{x}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00091}00091         \textcolor{keywordflow}{if} (LI.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}} > 0) int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}} = \mbox{\hyperlink{namespacebebop__controller_adbb5ce519c9ccec2a03354540b0d30fe}{clamp}}(int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}}, LI.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}}/I.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a6ab61b14159b24c1f362f21d6826a83d}{y}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00092}00092         \textcolor{keywordflow}{if} (LI.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}} > 0) int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}} = \mbox{\hyperlink{namespacebebop__controller_adbb5ce519c9ccec2a03354540b0d30fe}{clamp}}(int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}}, LI.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}}/I.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a89b6834e6fceddeeea981a74692279fa}{z}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00093}00093         \textcolor{keywordflow}{if} (LI.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}} > 0) int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}} = \mbox{\hyperlink{namespacebebop__controller_adbb5ce519c9ccec2a03354540b0d30fe}{clamp}}(int\_e.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}}, LI.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}}/I.\mbox{\hyperlink{structbebop__controller_1_1_vector4_a86c14a81c8b8e58d8f04d90e9221b4ec}{yaw}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00094}00094     \}}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00095}00095 }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00096}00096 \}}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00097}00097 }
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00098}\mbox{\hyperlink{pid__controller__angles_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{00098}} \textcolor{keywordtype}{int} \mbox{\hyperlink{pid__controller__angles_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}** argv)\{}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00099}00099     ros::init(argc, argv, \textcolor{stringliteral}{"{}pid\_controller\_node"{}});}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00100}00100     ros::NodeHandle nh;}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00101}00101     \mbox{\hyperlink{classbebop__controller_1_1_p_i_d_controller}{bebop\_controller::PIDController}} pid\_controller;}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00102}00102     ros::spin();}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00103}00103     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{pid__controller__angles_8cpp_source_l00104}00104 \}}

\end{DoxyCode}
